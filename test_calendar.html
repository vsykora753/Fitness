<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <title>Test Kalendáře</title>
    <style>
        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
            background: #ddd;
            border: 1px solid #ddd;
            max-width: 700px;
            margin: 20px auto;
        }
        .calendar-header {
            display: contents;
        }
        .calendar-header div {
            background: #333;
            color: white;
            padding: 10px;
            text-align: center;
            font-weight: bold;
        }
        .calendar-day {
            background: white;
            padding: 10px;
            min-height: 80px;
            text-align: center;
        }
        .other-month {
            background: #f5f5f5;
            color: #999;
        }
        .today {
            background: #ffeb3b;
            font-weight: bold;
        }
        #debug {
            margin: 20px auto;
            max-width: 700px;
            padding: 20px;
            background: #f0f0f0;
            border: 1px solid #ccc;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <h1 style="text-align: center;">Test Kalendáře - Listopad 2025</h1>
    
    <div id="debug"></div>
    
    <h2 id="currentMonth" style="text-align: center;"></h2>
    
    <div class="calendar">
        <div class="calendar-header">
            <div>Po</div>
            <div>Út</div>
            <div>St</div>
            <div>Čt</div>
            <div>Pá</div>
            <div>So</div>
            <div>Ne</div>
        </div>
        <div id="calendar-days" style="display: contents;">
            <!-- Dny budou vygenerovány JavaScriptem -->
        </div>
    </div>

    <script>
        const months = [
            'Leden', 'Únor', 'Březen', 'Duben', 'Květen', 'Červen',
            'Červenec', 'Srpen', 'Září', 'Říjen', 'Listopad', 'Prosinec'
        ];

        // Nastavíme na listopad 2025
        const currentDate = new Date(2025, 10, 1); // měsíc 10 = listopad (0-indexed)
        const debugDiv = document.getElementById('debug');
        const currentMonthElement = document.getElementById('currentMonth');
        const calendarDays = document.getElementById('calendar-days');

        function updateCalendar() {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();

            currentMonthElement.textContent = `${months[month]} ${year}`;
            calendarDays.innerHTML = '';

            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);

            // JavaScript: 0=neděle, 1=pondělí, ..., 6=sobota
            // Kalendář: Po=0, Út=1, ..., Ne=6
            // Převod: (jsDay + 6) % 7
            let startDay = (firstDay.getDay() + 6) % 7;
            
            debugDiv.innerHTML = `
                <strong>DEBUG INFO:</strong><br>
                Měsíc: ${months[month]} ${year}<br>
                První den měsíce: ${firstDay.toLocaleDateString('cs-CZ', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}<br>
                firstDay.getDay() = ${firstDay.getDay()} (0=Ne, 1=Po, 2=Út, 3=St, 4=Čt, 5=Pá, 6=So)<br>
                startDay (pozice v kalendáři) = ${startDay} (0=Po, 1=Út, 2=St, 3=Čt, 4=Pá, 5=So, 6=Ne)<br>
                <br>
                <strong>Kontrola:</strong><br>
                7.11.2025 = ${new Date(2025, 10, 7).toLocaleDateString('cs-CZ', { weekday: 'long' })}<br>
            `;

            const prevMonthDays = startDay;
            const prevMonth = new Date(year, month, 0);

            // Přidáme dny z předchozího měsíce
            for (let i = prevMonthDays - 1; i >= 0; i--) {
                addDayToCalendar(prevMonth.getDate() - i, true);
            }

            // Přidáme dny aktuálního měsíce
            for (let day = 1; day <= lastDay.getDate(); day++) {
                addDayToCalendar(day, false);
            }

            // Přidáme dny z následujícího měsíce
            const remainingDays = 42 - (prevMonthDays + lastDay.getDate());
            for (let day = 1; day <= remainingDays; day++) {
                addDayToCalendar(day, true);
            }
        }

        function addDayToCalendar(day, isOtherMonth) {
            const dayElement = document.createElement('div');
            dayElement.className = 'calendar-day' + (isOtherMonth ? ' other-month' : '');
            dayElement.textContent = day;

            const today = new Date();
            if (!isOtherMonth &&
                day === today.getDate() &&
                currentDate.getMonth() === today.getMonth() &&
                currentDate.getFullYear() === today.getFullYear()) {
                dayElement.classList.add('today');
            }

            calendarDays.appendChild(dayElement);
        }

        updateCalendar();
    </script>
</body>
</html>
