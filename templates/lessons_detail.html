{% extends 'base.html' %}
{% load static %}

{% block title %}{{ lesson.title }} | Fitness Lektor{% endblock %}

{% block content %}
<div class="lesson-detail">
    <h1>{{ lesson.title }}</h1>
    
    <div class="lesson-info-detail">
        <p class="lesson-description">{{ lesson.description }}</p>
        
        <div class="lesson-meta">
            <div class="meta-item">
                <strong>Lektor:</strong> {{ lesson.instructor.get_full_name }}
            </div>
            <div class="meta-item">
                <strong>Místo:</strong> {{ lesson.location }}
            </div>
            <div class="meta-item">
                <strong>Délka lekce:</strong> {{ lesson.duration }} minut
            </div>
            <div class="meta-item">
                <strong>Kapacita:</strong> {{ lesson.capacity }} osob
            </div>
            <div class="meta-item">
                <strong>Cena:</strong> {{ lesson.price }} Kč
            </div>
        </div>

        <h3>Dostupné termíny</h3>
        {% if time_slots %}
            <div class="time-slots-list">
                {% for slot in time_slots %}
                    <div class="time-slot-item">
                        <div class="slot-info">
                            <strong>{{ slot.start_time|date:'d.m.Y H:i' }}</strong>
                            {% if slot.is_available %}
                                <span class="badge-available">Dostupné</span>
                            {% else %}
                                <span class="badge-full">Obsazeno</span>
                            {% endif %}
                        </div>
                        {% if user.is_authenticated and not user.is_instructor and slot.is_available %}
                            <a href="{% url 'booking_create' slot.id %}" class="btn">Rezervovat tento termín</a>
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p>Pro tuto lekci nejsou momentálně dostupné žádné termíny.</p>
        {% endif %}
        
        {% if not user.is_authenticated %}
            <p style="margin-top: 20px;">Pro rezervaci se prosím <a href="{% url 'accounts:login' %}">přihlašte</a>.</p>
        {% endif %}
    </div>
    
</div>
{% endblock %}